<!DOCTYPE html>
<html>
<head>
    <title>Chatroom.mp4</title>

    <script src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"></script>

    <script src="main.js"></script>
     
</head>

<body style="background-color: #222;color:#fff">
    
    <h1 style="width:100%;text-align:center;height:5%;margin:0px;">yo</h1>

    <div id="displaybox" style = "position:relative;height:75%;width:90%;left:5%;background-color: #fff;">
        <div id = "samplebox" style="position:relative;background-color:#111;width:90%;height:20%;left:5%;padding:5px">asdf</div>
    </div>

    <!-- <button onclick="jerry()">jerry</button> -->

    <!-- <div id="roomid" style = "background-color:#fff;width:20%;height:10%;color:#fff" contenteditable="true"></div> -->

    <div style="position:absolute;bottom:0px;left:0px;width:100%;background-color:#333;margin:0px;height:20%">
        <div style="margin:auto;width:80%;background-color: #444;height:50%;top:20%;position:relative">
            <div id = "messagebox" contenteditable="true" style="background-color:#333;width:83%;height:80%;top:10%;left:1%;position:absolute;font-size:large"></div>
            <button style="height:100%;font-size:large;right:0px;top:0px;position:absolute;width:15%"
            onclick = "
                for(var i = 0;i<conns.length;i++){conns[i].send(document.getElementById('messagebox').innerText);}
                document.getElementById('messagebox').innerText = '';
            ">
            Send</button>
        </div>
    </div>


    <!--ids are all of the form [identifier string][index], such that on init each client picks the lowest available index-->
    <!--each client maintains connections with 8 others, four indeces above and four below-->
    <!--messages propogate through the network, checked by timestamp to avoid infinite loops-->
    <!--if a gap of four indeces emerges, the network becomes separated. this can be avoided by infrequently reassigning ids to the lowest available index, filling the holes-->
    <!-- upon reception, if a message is new, add it to the screen and relay it to all connections -->
    <!-- if message is not new (duplicate timestamp), do nothing -->

</body>

</html>
